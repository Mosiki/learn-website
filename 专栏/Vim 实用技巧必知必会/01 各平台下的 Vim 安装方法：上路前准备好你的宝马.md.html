<!DOCTYPE html>
<!-- saved from url=(0046)https://kaiiiz.github.io/hexo-theme-book-demo/ -->
<html xmlns="http://www.w3.org/1999/xhtml">

<head>

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
        <link rel="icon" href="../../static/favicon.png">
        <title>01 各平台下的 Vim 安装方法：上路前准备好你的宝马.md</title>
        <!-- Spectre.css framework -->
        <link rel="stylesheet" href="../../static/index.css">
        <link rel="stylesheet"
              href="../../static/highlight.min.css">
        <script src="../../static/highlight.min.js"></script>
        <!-- theme css & js -->
        <meta name="generator" content="Hexo 4.2.0">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5295275829820252"
                crossorigin="anonymous"></script>
        <script async defer data-website-id="83e5d5db-9d06-40e3-b780-cbae722fdf8c" src="https://analyze.lianglianglee.com/umami.js"></script>
    </head>

<body>

    <div class="book-container">
        <div class="book-sidebar">
            <div class="book-brand">
                <a href="../../index.html">
                    <img src="../../static/favicon.png">
                    <span>技术文章摘抄</span>
                </a>
            </div>
            <div class="book-menu uncollapsible">
                <ul class="uncollapsible">
                    <li><a href="../../index.html" class="current-tab">首页</a></li>
                </ul>

                <ul class="uncollapsible">
                    <li><a href="../index.html">上一级</a></li>
                </ul>

                <ul class="uncollapsible">
                    <li>

                        
                        <a href="00%20%E5%AF%BC%E8%AF%BB%20%E6%B1%A0%E5%BB%BA%E5%BC%BA%EF%BC%9AVim%20%E5%B0%B1%E6%98%AF%E5%9B%9B%E4%B8%AA%E5%AD%97%E2%80%9C%E5%94%AF%E5%BF%AB%E4%B8%8D%E7%A0%B4%E2%80%9D.md.html">00 导读 池建强：Vim 就是四个字“唯快不破”.md</a>

                    </li>
                    <li>

                        
                        <a href="00%20%E5%BC%80%E7%AF%87%E8%AF%8D%20%E6%88%91%E4%BB%AC%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%AD%A6%20Vim%EF%BC%9F.md.html">00 开篇词 我们为什么要学 Vim？.md</a>

                    </li>
                    <li>

                        <a class="current-tab" href="01%20%E5%90%84%E5%B9%B3%E5%8F%B0%E4%B8%8B%E7%9A%84%20Vim%20%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%EF%BC%9A%E4%B8%8A%E8%B7%AF%E5%89%8D%E5%87%86%E5%A4%87%E5%A5%BD%E4%BD%A0%E7%9A%84%E5%AE%9D%E9%A9%AC.md.html">01 各平台下的 Vim 安装方法：上路前准备好你的宝马.md</a>
                        

                    </li>
                    <li>

                        
                        <a href="02%20%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%92%8C%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4%EF%BC%9A%E5%BA%94%E5%AF%B9%E7%AE%80%E5%8D%95%E7%9A%84%E7%BC%96%E8%BE%91%E4%BB%BB%E5%8A%A1.md.html">02 基本概念和基础命令：应对简单的编辑任务.md</a>

                    </li>
                    <li>

                        
                        <a href="03%20%E6%9B%B4%E5%A4%9A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%EF%BC%9A%E5%BA%94%E5%AF%B9%E7%A8%8D%E5%A4%8D%E6%9D%82%E7%9A%84%E7%BC%96%E8%BE%91%E4%BB%BB%E5%8A%A1.md.html">03 更多常用命令：应对稍复杂的编辑任务.md</a>

                    </li>
                    <li>

                        
                        <a href="04%20%E5%88%9D%E6%AD%A5%E5%AE%9A%E5%88%B6%EF%BC%9A%E8%AE%A9%E4%BD%A0%E7%9A%84%20Vim%20%E6%9B%B4%E9%A1%BA%E6%89%8B.md.html">04 初步定制：让你的 Vim 更顺手.md</a>

                    </li>
                    <li>

                        
                        <a href="05%20%E5%A4%9A%E6%96%87%E4%BB%B6%E6%89%93%E5%BC%80%E4%B8%8E%E7%BC%93%E5%86%B2%E5%8C%BA%EF%BC%9A%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4%E7%9A%84%E6%AD%A3%E7%A1%AE%E5%A7%BF%E5%8A%BF.md.html">05 多文件打开与缓冲区：复制粘贴的正确姿势.md</a>

                    </li>
                    <li>

                        
                        <a href="06%20%E7%AA%97%E5%8F%A3%E5%92%8C%E6%A0%87%E7%AD%BE%E9%A1%B5%EF%BC%9A%E4%BF%AE%E6%94%B9%E3%80%81%E5%AF%B9%E6%AF%94%E5%A4%9A%E4%B8%AA%E6%96%87%E4%BB%B6%E7%9A%84%E6%AD%A3%E7%A1%AE%E5%A7%BF%E5%8A%BF.md.html">06 窗口和标签页：修改、对比多个文件的正确姿势.md</a>

                    </li>
                    <li>

                        
                        <a href="07%20%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%9A%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E7%9A%84%E6%90%9C%E7%B4%A2%E5%92%8C%E6%9B%BF%E6%8D%A2.md.html">07 正则表达式：实现文件内容的搜索和替换.md</a>

                    </li>
                    <li>

                        
                        <a href="08%20%E5%9F%BA%E6%9C%AC%E7%BC%96%E7%A8%8B%E6%94%AF%E6%8C%81%EF%BC%9A%E8%A7%84%E9%81%BF%E3%80%81%E8%A7%A3%E5%86%B3%E7%BC%96%E7%A8%8B%E6%97%B6%E7%9A%84%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.md.html">08 基本编程支持：规避、解决编程时的常见问题.md</a>

                    </li>
                    <li>

                        
                        <a href="09%20%E4%B8%83%E5%A4%A7%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7%EF%BC%9A%E8%AE%A9%E7%BC%96%E8%BE%91%E6%95%88%E7%8E%87%E5%86%8D%E4%B8%8A%E4%B8%80%E4%B8%AA%E5%8F%B0%E9%98%B6.md.html">09 七大常用技巧：让编辑效率再上一个台阶.md</a>

                    </li>
                    <li>

                        
                        <a href="10%20%E4%BB%A3%E7%A0%81%E9%87%8D%E6%9E%84%E5%AE%9E%E9%AA%8C%EF%BC%9A%E5%9C%A8%E5%AE%9E%E6%88%98%E4%B8%AD%E6%8F%90%E9%AB%98%E7%BC%96%E8%BE%91%E7%86%9F%E7%BB%83%E5%BA%A6.md.html">10 代码重构实验：在实战中提高编辑熟练度.md</a>

                    </li>
                    <li>

                        
                        <a href="11%20%E6%96%87%E6%9C%AC%E7%9A%84%E7%BB%86%E8%8A%82%EF%BC%9A%E5%85%B3%E4%BA%8E%E5%AD%97%E7%AC%A6%E3%80%81%E7%BC%96%E7%A0%81%E3%80%81%E8%A1%8C%E4%BD%A0%E6%89%80%E9%9C%80%E8%A6%81%E7%9F%A5%E9%81%93%E7%9A%84%E4%B8%80%E5%88%87.md.html">11 文本的细节：关于字符、编码、行你所需要知道的一切.md</a>

                    </li>
                    <li>

                        
                        <a href="12%20%E8%AF%AD%E6%B3%95%E5%8A%A0%E4%BA%AE%E5%92%8C%E9%85%8D%E8%89%B2%E6%96%B9%E6%A1%88%EF%BC%9A%E9%A2%9C%E5%8D%B3%E6%AD%A3%E4%B9%89.md.html">12 语法加亮和配色方案：颜即正义.md</a>

                    </li>
                    <li>

                        
                        <a href="13%20YouCompleteMe%EF%BC%9AVim%20%E9%87%8C%E7%9A%84%E8%87%AA%E5%8A%A8%E5%AE%8C%E6%88%90.md.html">13 YouCompleteMe：Vim 里的自动完成.md</a>

                    </li>
                    <li>

                        
                        <a href="14%20Vim%20%E8%84%9A%E6%9C%AC%E7%AE%80%E4%BB%8B%EF%BC%9A%E5%BC%80%E5%A7%8B%E4%BD%A0%E7%9A%84%E6%B7%B1%E5%BA%A6%E5%AE%9A%E5%88%B6.md.html">14 Vim 脚本简介：开始你的深度定制.md</a>

                    </li>
                    <li>

                        
                        <a href="15%20%E6%8F%92%E4%BB%B6%E8%8D%9F%E8%90%83%EF%BC%9A%E4%B8%8D%E5%8F%AF%E6%88%96%E7%BC%BA%E7%9A%84%E6%8F%92%E4%BB%B6.md.html">15 插件荟萃：不可或缺的插件.md</a>

                    </li>
                    <li>

                        
                        <a href="16%20%E7%BB%88%E7%AB%AF%E5%92%8C%20GDB%20%E6%94%AF%E6%8C%81%EF%BC%9A%E4%B8%8D%E7%A6%BB%E5%BC%80%20Vim%20%E5%AE%8C%E6%88%90%E5%BC%80%E5%8F%91%E4%BB%BB%E5%8A%A1.md.html">16 终端和 GDB 支持：不离开 Vim 完成开发任务.md</a>

                    </li>
                    <li>

                        
                        <a href="%E6%8B%93%E5%B1%951%20%E7%BA%AF%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%EF%BC%9A%E4%BD%BF%E7%94%A8%20Vim%20%E4%B9%A6%E5%86%99%E4%B8%AD%E8%8B%B1%E6%96%87%E6%96%87%E6%A1%A3.md.html">拓展1 纯文本编辑：使用 Vim 书写中英文文档.md</a>

                    </li>
                    <li>

                        
                        <a href="%E6%8B%93%E5%B1%952%20C%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%20Vim%20%E5%B7%A5%E4%BD%9C%E7%8E%AF%E5%A2%83%EF%BC%9AC%20%E4%BB%A3%E7%A0%81%E7%9A%84%E6%90%9C%E7%B4%A2%E3%80%81%E6%8F%90%E7%A4%BA%E5%92%8C%E8%87%AA%E5%8A%A8%E5%AE%8C%E6%88%90.md.html">拓展2 C 程序员的 Vim 工作环境：C 代码的搜索、提示和自动完成.md</a>

                    </li>
                    <li>

                        
                        <a href="%E6%8B%93%E5%B1%953%20Python%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%20Vim%20%E5%B7%A5%E4%BD%9C%E7%8E%AF%E5%A2%83%EF%BC%9A%E5%AE%8C%E6%95%B4%E7%9A%84%20Python%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.md.html">拓展3 Python 程序员的 Vim 工作环境：完整的 Python 开发环境.md</a>

                    </li>
                    <li>

                        
                        <a href="%E6%8B%93%E5%B1%954%20%E6%8F%92%E4%BB%B6%E6%A0%B7%E4%BE%8B%E5%88%86%E6%9E%90%EF%BC%9A%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E6%94%B9%E8%BF%9B%E6%8F%92%E4%BB%B6.md.html">拓展4 插件样例分析：自己动手改进插件.md</a>

                    </li>
                    <li>

                        
                        <a href="%E6%8B%93%E5%B1%955%20%E5%85%B6%E4%BB%96%E6%8F%92%E4%BB%B6%E5%92%8C%E6%8A%80%E5%B7%A7%EF%BC%9A%E5%90%B4%E5%92%8F%E7%82%9C%E7%9A%84%E7%AE%B1%E5%BA%95%E7%A7%81%E8%97%8F.md.html">拓展5 其他插件和技巧：吴咏炜的箱底私藏.md</a>

                    </li>
                    <li>

                        
                        <a href="%E7%BB%93%E6%9D%9F%E8%AF%AD%20Vim%20%E6%A3%AE%E6%9E%97%E6%8E%A2%E7%A7%98%EF%BC%8C%E4%B8%80%E5%88%87%E6%89%8D%E5%88%9A%E5%88%9A%E5%BC%80%E5%A7%8B.md.html">结束语 Vim 森林探秘，一切才刚刚开始.md</a>

                    </li>
                </ul>

            </div>
        </div>

        <div class="sidebar-toggle" onclick="sidebar_toggle()" onmouseover="add_inner()" onmouseleave="remove_inner()">
            <div class="sidebar-toggle-inner"></div>
        </div>

        <script>
            function add_inner() {
                let inner = document.querySelector('.sidebar-toggle-inner')
                inner.classList.add('show')
            }

            function remove_inner() {
                let inner = document.querySelector('.sidebar-toggle-inner')
                inner.classList.remove('show')
            }

            function sidebar_toggle() {
                let sidebar_toggle = document.querySelector('.sidebar-toggle')
                let sidebar = document.querySelector('.book-sidebar')
                let content = document.querySelector('.off-canvas-content')
                if (sidebar_toggle.classList.contains('extend')) { // show
                    sidebar_toggle.classList.remove('extend')
                    sidebar.classList.remove('hide')
                    content.classList.remove('extend')
                } else { // hide
                    sidebar_toggle.classList.add('extend')
                    sidebar.classList.add('hide')
                    content.classList.add('extend')
                }
            }


            function open_sidebar() {
                let sidebar = document.querySelector('.book-sidebar')
                let overlay = document.querySelector('.off-canvas-overlay')
                sidebar.classList.add('show')
                overlay.classList.add('show')
            }
            function hide_canvas() {
                let sidebar = document.querySelector('.book-sidebar')
                let overlay = document.querySelector('.off-canvas-overlay')
                sidebar.classList.remove('show')
                overlay.classList.remove('show')
            }

        </script>

        <div class="off-canvas-content">
            <div class="columns">
                <div class="column col-12 col-lg-12">
                    <div class="book-navbar">
                        <!-- For Responsive Layout -->
                        <header class="navbar">
                            <section class="navbar-section">
                                <a onclick="open_sidebar()">
                                    <i class="icon icon-menu"></i>
                                </a>
                            </section>
                        </header>
                    </div>
                    <div class="book-content" style="max-width: 960px; margin: 0 auto;
    overflow-x: auto;
    overflow-y: hidden;">
                        <div class="book-post">
                            <p id="tip" align="center"></p>
                            <div><h1>01 各平台下的 Vim 安装方法：上路前准备好你的宝马</h1>
<p>你好，我是吴咏炜。</p>
<p>今天第一讲，我们先来讨论一下 Vim 在 Linux、macOS、Windows 系统下的安装和配置问题。</p>
<p>Vim 在 Linux 和 macOS 上一般是默认安装的，在 Windows 上不是。不过 Vim 的网站上提供了 Windows 下的安装包，自己安装也很容易。所以，今天的课程我不会手把手、一步步地讲，而是挑选一些重点。对于默认安装的情况，主要讨论的是版本老旧或功能不全的问题。对于其他情况，我则会给出一个基本指引，减少你走弯路的可能性。</p>
<p>好了，下面我们就分各个不同的平台，一一来看。</p>
<h2>Linux 下的安装</h2>
<h3>Red Hat 和 CentOS 系列</h3>
<p>在 Red Hat Linux 和 CentOS Linux 上，默认安装的 Vim 可能是一个最小功能的版本。虽然这个版本启动速度很快，但它缺少了很多对开发有用的功能，如语法加亮、Python 集成和图形界面。一般情况下，应至少安装更全功能版本的 Vim；如果能使用 X Window 的话，则应安装图形界面版本。</p>
<p>你可以通过下面的命令来查看已经安装的 Vim 版本：</p>
<pre><code>yum list installed | grep vim
</code></pre>
<p>如果输出只有下面这样的内容的话，就说明安装的 Vim 版本只有基本功能：</p>
<blockquote>
<p><code>vim-minimal.x86_64 2:8.0.1763-13.el8 @System</code></p>
</blockquote>
<p>此时，我建议使用 <code>sudo yum install vim-X11</code> 来安装图形界面的 Vim，或至少使用 <code>sudo yum install vim-enhanced</code> 来安装增强版本的 Vim（如果你不在这台机器上进行图形界面登录的话）。</p>
<p>只要你使用图形界面，一般而言，你都应该安装有图形界面支持的 Vim。总体而言，图形界面 Vim 的功能更丰富，并且即使你只在终端里使用 Vim，含图形界面支持的 Vim 会带剪贴板支持，跟整个图形环境的交互也就比较容易。当然，如果你只是远程通过 SSH 使用 Vim 的话，那确实图形界面支持就没有意义了。</p>
<h3>Debian 和 Ubuntu 系列</h3>
<p>在 Debian、Ubuntu 等使用 apt 的 Linux 发行版上，Vim 同样有着不同功能版本的区别，而且选择更多。我们可能会看到：</p>
<ul>
<li>vim</li>
<li>vim-athena</li>
<li>vim-gnome</li>
<li>vim-gtk</li>
<li>vim-gtk3</li>
<li>vim-nox</li>
<li>vim-tiny</li>
</ul>
<p>它们中有编译进最小功能的 Vim 包（vim-tiny），有较全功能的文本界面 Vim 包（vim-nox），有适用于老的 X-Window 界面的版本（vim-athena），有适用于 KDE 环境的 GTK2 版本（vim-gtk），等等。</p>
<p><img src="assets/dc83899514bd661b41d1e8a902d47294.png" alt="Fig1.1" title="一个估计你不会去用的古老界面的 Vim（Athena 界面）" /></p>
<p>如果你不确定要装什么版本的话，那可以遵循我下面的建议：</p>
<ul>
<li>如果你使用标准的 GNOME 桌面环境的话（大部分的情况），安装 vim-gtk3 或 vim-gnome。</li>
<li>如果你使用 KDE 桌面的话，安装 vim-gtk。</li>
<li>如果你只使用文本界面的话，安装 vim-nox。</li>
<li>都不是？那你是个爱自己定制的家伙，也就不需要我告诉你该安装什么了。</li>
</ul>
<p>你可以通过下面的命令来查看已经安装的 Vim 版本：</p>
<pre><code>apt list --installed | grep vim
</code></pre>
<p>我们先执行 <code>sudo apt update</code> 来确保更新环境，然后使用 <code>sudo apt install vim-gtk3</code> 安装 GTK3 版本的 Vim（或者其他你需要的版本）。如果你安装了图形界面的版本，不必单独再另外安装其他版本的 Vim，因为图形版本的 Vim 也是可以纯文本启动的。事实上，在 Ubuntu 上，<code>vim</code> 和 <code>gvim</code> 都是指向同一个应用程序的符号链接，且 <code>gvim</code> 的执行效果和 <code>vim -g</code> 相同。</p>
<p><img src="assets/39d5f8bef475c6b223cee68de8376f5a.png" alt="Fig1.2" title="在终端中运行 vim.gtk3，执行 :version" /></p>
<h3>手工编译</h3>
<p>如果你用的 Linux 发行版较老的话，你可能会希望手工编译 Vim 来得到最新的版本。此时需要注意的是，Vim 有很多的编译配置选项，有些缺省是不打开的。对于这个课程来讲，我们会希望至少加上 Python 支持和图形界面支持。</p>
<p>你首先需要确保自己已经安装了所需的开发包（可以参考<a href="https://superuser.com/a/749760/270697">这个网上的回答</a>）。然后，我们可以使用下面的命令来配置 Vim 和编译（根据需要，“auto”也可以替换成“gtk3”等其他需要的数值）：</p>
<pre><code>./configure --enable-pythoninterp \
            --enable-python3interp \
            --enable-gui=auto
make -j
sudo make install
</code></pre>
<p>如果上述步骤正常没有出错，Vim就被成功安装到 /usr/local 下了。你可以用 <code>which vim</code> 来检查系统是否会自动优先选择你的 vim：如果不是的话，你可能需要调整 PATH 里的顺序，或者设置别名来优先启动 /usr/local/bin/vim）。然后，你可以使用 <code>vim --version</code> 命令来输出 vim 的版本信息。我们希望能在输出里看到：</p>
<blockquote>
<p>Huge version with … GUI-
+python/dyn-
+python3/dyn</p>
</blockquote>
<p>目前 Python 2 已经停止支持，所以你最好可以确保上面的输出中包含“+python3”（很多 Vim 的插件已经开始要求 Python 3、不再支持 Python 2 了）；没有“+python”（即 Python 2）则没什么关系（有没有“dyn”关系也不大）。</p>
<p><img src="assets/f05a0a02cbea3b6412790ab7a1aa6d30.png" alt="Fig1.3" title="我在 CentOS 7 上编译的 gvim" /></p>
<p>好了，关于 Linux 环境下的Vim安装和配置要点我们就讲完了，接下来继续看在 macOS 上如何安装。</p>
<h2>macOS 下的安装</h2>
<p>在 macOS 中一般已经内置了 vim，并提供了除图形界面外的较完整功能集。如果你希望使用图形界面，则需要自行安装 MacVim，一个跟现代 macOS 融合较好的独立 Vim 版本。安装 MacVim 有两种常用方式：</p>
<ul>
<li>使用 Homebrew。我推荐你使用这种方式，这样的话，以后升级也会比较容易。</li>
<li>使用 MacVim 的独立安装包。如果你之前没有在用 Homebrew 的话，或处于不方便使用 Homebrew 的网络环境中，这种方式也可以。</li>
</ul>
<p>由于使用 Homebrew 已经足够简单，日后升级也非常方便，我个人觉得我们没必要自己去编译 MacVim。</p>
<p><img src="assets/f49cb907c0b34b9c2b8f7579de9d5075.png" alt="Fig1.4" title="MacVim 的界面" /></p>
<h3>使用 Homebrew 安装 MacVim</h3>
<p>首先，如果你没有 Homebrew，那你需要先安装 Homebrew。安装信息可以在 <a href="https://brew.sh/">Homebrew 的主页</a>上找到（这个网站是支持中文的）。</p>
<p>在安装了 Homebrew 之后，一般情况下，你需要修改你的 .bash_profile（如果使用 Bash 的话）、.zprofile（如果使用 Zsh 的话）或是相应的 shell 的配置文件，调整 PATH，把 /usr/local/bin 放到 /usr/bin 前面。我个人在 .bash_profile 里是这样配置的：</p>
<pre><code>if [[ $PATH != &quot;$HOME/bin&quot;* ]]; then
  PATH=~/bin:/usr/local/bin:/usr/local/sbin:`echo $PATH|sed -e &quot;s!:$HOME/bin!!&quot; -e 's!:/usr/local/bin!!'`
fi
</code></pre>
<p>这样，可以确保个人的路径优先于 /usr/local，而 /usr/local 下的路径又优先于系统的路径。</p>
<p>如果你这样配置的话，那只要执行 <code>brew install macvim</code>，然后在等待安装完成之后，你用 <code>vim</code> 启动的就是 MacVim 了。缺省用 <code>vim</code> 运行的仍然是纯文本界面的 Vim，但跟 Linux 一样，你可以用 <code>vim -g</code> 或 <code>gvim</code>（还有仅用在 Mac 上的 <code>mvim</code>）来启动 Vim 的图形界面。</p>
<p>跟 Homebrew 里的其他软件一样，你以后要升级 MacVim 的话，只需要输入命令 <code>brew upgrade macvim</code> 即可。是不是很简单？这就是为什么我比较推荐这种安装方式，后期升级真的更容易。不过我下面还是会介绍下安装包的方式，以满足我们不同的应用需求。</p>
<h3>使用安装包安装 MacVim</h3>
<p>跟大部分的 Mac 软件一样，你也可以直接使用 DMG 安装包来安装 MacVim。目前可从以下网址下载 MacVim 的安装包：</p>
<p><a href="https://github.com/macvim-dev/macvim/releases">https://github.com/macvim-dev/macvim/releases</a></p>
<p>等待下载完成后，双击下载的文件，然后会打开一个访达（Finder）窗口。你只需要把 MacVim 拖拽复制到应用程序文件夹即可。</p>
<p>在这种安装方式下，手工键入 <code>vim</code>、<code>gvim</code> 或 <code>mvim</code> 命令是无法启动 MacVim 的。你需要手工创建这些命令的符号链接（symlink）或别名（alias）才行。假设你的 MacVim 是直接安装在应用程序文件夹里的话，这些命令本身可以在 /Applications/MacVim.app/Contents/bin 文件夹里找到；使用下面的命令可以在你自己的 bin 目录下创建这些命令的符号链接：</p>
<pre><code>[ -d ~/bin ] || mkdir ~/bin
ln -s /Applications/MacVim.app/Contents/bin/* ~/bin/
</code></pre>
<h2>Windows 下的安装</h2>
<p>最后，我们来看在 Windows 下怎么安装。课程开头我提到了，Windows 上缺省是没有 Vim 的。我们可以从 Vim 的网站下载 Windows 下的安装包：</p>
<p><a href="https://www.vim.org/download.php#pc">https://www.vim.org/download.php#pc</a></p>
<p>在 Linux 和 macOS 上，64 位应用程序已经成为主流。而与此不同的是，在 64 位Windows上，32 位应用程序仍然很常见。默认的 Vim 8 的安装包安装的仍然是一个 32 位的应用程序。不过，32 位的 Vim 也足够满足一般需求了，除非你需要编辑 2 GB 以上的大文件。</p>
<p>安装界面会有一个选择组件的步骤，如下图所示：</p>
<p><img src="assets/3a9291c280033a71f80d924467546580.png" alt="Fig1.5" title="Vim 的组件选择界面" /></p>
<p>这个界面中，下面几项我们可以关注一下：</p>
<ul>
<li>“安装批处理文件”（Create .bat files）：对于用 Vim 的开发者来说，通常命令行是刚需，所以我们一般需要勾上这项。</li>
<li>“创建图标”（Create icons for Vim）：根据你自己的需要进行选择，通常我会去掉展开子项里的“桌面图标”（On the Desktop），不在桌面上创建 Vim 的图标。</li>
<li>“创建默认配置文件”（Create Default Config）：去掉这项——我们马上会创建配置文件。</li>
<li>“安装多语言支持”（Native Language Support）：这项功能使得 Vim 的菜单可以显示中文的命令，但实际上还是有点鸡肋，因为 Vim 的主要功能不是靠菜单驱动的，安装程序安装的帮助文件也只有英文版。所以，这项选和不选关系不大，你可以自由选择。</li>
</ul>
<p>然后我们点“下一步”（Next），不需要修改安装目标文件夹，完成安装即可。</p>
<p>完成安装后，Vim 会缺省打开一个 README 文件。在这个窗口中，我们应当键入“<code>:e ~_vimrc</code>”，回车键，然后把下面的内容粘贴进去（这些配置项的意义我们以后会讨论）：</p>
<pre><code>set enc=utf-8
set nocompatible
source $VIMRUNTIME/vimrc_example.vim
</code></pre>
<p>然后键入“<code>ZZ</code>”（大写）存盘退出即可。</p>
<p><img src="assets/07ebd8b7d535e516e8d68517a6338717.gif" alt="Fig1.6" title="创建基本的 _vimrc 配置文件" /></p>
<p>注意由于历史上的文件系统限制，在 Windows 下 Vim 的配置文件名称是 _vimrc 而不是 .vimrc（虽然 Windows 命令行不支持像 Unix 一样用“~”代表用户的主目录，在 Vim 里我们仍然可以使用“~\_vimrc”或“~/_vimrc”这样的写法）。这是 Unix 和 Windows 下的 Vim 配置的区别之一。其他的主要区别是以下两点：</p>
<ul>
<li>点打头的 Vim 文件都成了“_”打头，如 .viminfo 也成了 _viminfo</li>
<li>点打头的 Vim 配置目录 .vim 在 Windows 下则成了 vimfiles</li>
</ul>
<p>除此之外，Vim 的配置在 Windows 下和 Unix 下（如 Linux 和 macOS）并没有根本不同。Windows 上的主要麻烦在于，由于 Vim 的生态主要在 Unix 上，某些 Vim 的插件在 Windows 上安装配置需要花费更大的力气。但就一般的文本和程序编辑而言，Vim 在 Windows 下和 Linux 下没有本质的不同。甚至 Windows 下还有一个小小的优势：Unix 下虽然 Vim 可以编译成支持 Python 2 和 Python 3，但在 Vim 里一旦执行了 Python 2 的代码，就不能再执行 Python 3 的代码了；反之亦然。Windows 下则没有这个限制。</p>
<p>有没有注意到我只在 Windows 的安装部分讨论了配置？这是因为 Unix 下主流的缺省编码已经是 UTF-8 了，而 Vim 只能在内码是 UTF-8 的情况下才能处理多语言的文本。而我们有自己的配置文件，是为了确保启用一些最为基本的配置选项，来保证基本行为的一致性。</p>
<p>Windows 上可以把 Vim 配置成跟普通的编辑器行为差不多，包括支持 Ctrl-A 全选，选择内容后输入任何内容替换选择的内容，等等。但是，这种行为跟 Vim 的标准行为是冲突的。我们要学习 Vim，还是忘了这些 Windows 特有的功能为好，去学习掌握 Vim 的跨平台标准功能。上面的配置文件也同样没有启用 Windows 下的特有行为。</p>
<h3>Cygwin/MSYS2</h3>
<p>Windows 有 <a href="http://cygwin.org/">Cygwin</a> 和 <a href="https://www.msys2.org/">MSYS2</a>，可以提供类似于 Linux 的 POSIX shell。在这些环境里，Vim 都是标准组件，按这些环境的标准方式来安装 Vim 就行。如果你使用 <a href="https://gitforwindows.org/">Git Bash</a> 的话，里面就直接包含了 MSYS2 的终端、Bash 和 Vim。唯一需要提一句的是，这些类 POSIX 环境里面的 Vim 配置应当参照 Linux 终端来，而不是 Windows 下的标准方式（也就是说，个人配置目录和配置文件是 .vim 和 .vimrc，而非 vimfiles 和 _vimrc）。我以后对这种情况就不再单独描述了。</p>
<h3>远程使用 Vim</h3>
<p>还有一种常用的环境恐怕是使用 mintty、PuTTY、SecureCRT 之类的软件在 Windows 上远程连接到 Linux 机器上。在这种情况下，需要特别注意的，是远程终端软件的远程字符集（如 PuTTY 中的“Windows &gt; Translation &gt; Remote character set”）应当设置成 UTF-8。这个设定跟具体的软件及其版本有关，我就不详细说明了；请自行查看你所使用的远程终端软件的设定和相关文档。</p>
<h2>学习 Vim</h2>
<p>上面我们讲解了 Vim 的安装。如果安装过程中遇到了什么问题，可以留言提问。接下来，我会给你提供一些 Vim 的学习资料，帮助你进入 Vim 的世界。你应该仔细看一下你所使用的平台上的 Vim 安装信息（其他平台的可以略过），并且应该自己打开 Vim 教程练习一遍（除非这些基础知识你都了解了）。键盘配置相关信息属于可选，可以根据自己的兴趣和需要决定是否了解一下。</p>
<h3>中文帮助文件</h3>
<p>Vim 内置了完整的英文帮助文件。如果你想要中文帮助文件的话，有个好消息是，有网友同步翻译了最新的帮助文件，而且安装过程在 Vim 8 （或将来的版本）里是非常简单的。以 Unix 下为例（Windows 下类似，但路径 .vim 需要修改为 vimfiles）：</p>
<pre><code>cd ~/.vim
mkdir -p pack/my/start
git clone https://github.com/yianwillis/vimcdoc.git pack/my/start/vimcdoc
</code></pre>
<p>如果你不需要以后利用 Git 来快速升级文档的话， 也可以在这个 <a href="https://github.com/yianwillis/vimcdoc">Vim 中文文档计划</a>的<a href="https://github.com/yianwillis/vimcdoc/releases">下载页面</a>下载 tar 包，然后自行解压到 ~/.vim/pack/my/start 目录下（或 Windows 用户目录下的 vimfiles\pack\my\start 目录下）。</p>
<p>Windows 用户有一个简单的安装程序（当前为 <a href="https://github.com/yianwillis/vimcdoc/releases/download/v2.3.0/vimcdoc-2.3.0-setup-unicode.exe">vimcdoc-2.3.0-setup-unicode.exe</a>），可以自动帮你完成中文帮助文件的安装任务。如果你的机器上没有 <code>git</code> 和 <code>tar</code> 可执行程序的话，那这个方式最简单。</p>
<p><img src="assets/fe5d4b5cbf08c939feb8d453f919d1a7.png" alt="Fig1.7" title="中文 Vim 帮助" /></p>
<h3>Vim 教程</h3>
<p>Vim 在安装中自带了一个教程，可供快速入手使用。如果你对 Vim 的基本操作不熟的话，建议你完整学习一下，我也就不必多费笔墨介绍一些最基础的用法了。</p>
<p>Vim 教程支持多语言，可使用命令 <code>vimtutor</code> 来启动。如果启动的教程的语言不是你希望的，你可以使用环境变量 LANG 来设定希望的语言。比如，下面的命令可以在 Unix 环境中启动一个中文的 Vim 教程：</p>
<pre><code>LANG=zh_CN.UTF-8 vimtutor
</code></pre>
<p>Windows 下你可以在开始菜单里找到 Vim tutor。但我测试下来<a href="https://github.com/vim/vim/issues/5756">它有一个问题</a>。虽然我提交的解决方法已经作为补丁（8.2.0412）合并，但目前（Vim 8.2）安装程序安装的文件多半仍然是有问题的，你会无法成功地创建一个 tutor 文件的副本供编辑使用。我建议手工创建一个这个教程的副本。可以在命令提示符下输入：</p>
<pre><code>vim --clean -c &quot;e $VIMRUNTIME/tutor/tutor.zh_cn.utf-8&quot; -c &quot;w! TUTORCOPY&quot; -c &quot;q&quot;
</code></pre>
<p>这样即可在当前目录下创建一个教程的副本。然后我们可以用 <code>gvim TUTORCOPY</code> 来打开这个副本进行学习。</p>
<p><img src="assets/208992f818376e6010066c4a544286c5.png" alt="Fig1.8" title="Vim 教程" /></p>
<h3>键盘重配置</h3>
<p>最后，有些重度的 Vim 用户会重新配置键盘，把使用频度较低的大写锁定键（Caps Lock）重新映射成 Esc 或 Ctrl 键。对于这个问题，如果你需要的话，网上很容易就能找到攻略，如：</p>
<ul>
<li><a href="https://blog.csdn.net/daerzei/article/details/89414610">Linux下将大写锁定键(CapsLock)键映射为Ctrl键(Ubuntu, Manjaro，CentOS)</a></li>
<li><a href="https://blog.csdn.net/tbestcc/article/details/52287622">mac book更改caps lock键为esc键/ctrl键</a></li>
<li><a href="https://blog.csdn.net/P_LarT/article/details/72829425">windows交换大写锁定键与ESC键（注册表修改）</a></li>
<li><a href="https://www.kutu66.com/Mac/article_11233">在任何操作系统上，如何禁用或者重新分配 Caps Lock键</a></li>
</ul>
<p>这当然是一件非常个人化的事情，而且有一个风险，你一旦跑到别人的机器上操作，你的“肌肉记忆”可能会让你常常按错键。鉴于你目前可能只是个 Vim 的初学者，现在不一定需要这么去做。等到你觉得按 Esc 太麻烦了，再想起这个可能性去修改键盘配置也来得及。</p>
<h2>内容小结</h2>
<p>今天我们讨论了 Vim 在常见平台上的安装过程。顺便说一句，以后在牵涉到环境问题时，我一般也会以上面提到的几种典型情况为例来进行讲解：</p>
<ul>
<li>Linux（CentOS 和 Ubuntu）</li>
<li>macOS</li>
<li>Windows</li>
</ul>
<p>你可能看着多个平台的安装过程有点晕，这却是我的实际使用环境了——我就是在各个平台下都安装、配置、使用着 Vim 的，这也就是 Vim 的全平台、跨平台优势了。</p>
<p>当然，必须得承认，Vim 还是最适合类 Unix 环境，它的生态系统也是在类 Unix 环境下最好。鉴于在 Windows 下已经越来越容易接触到类 Unix 环境（像 Git Bash、Docker 和 Windows Subsystem for Linux），服务器开发上 Linux 也已经成了主流，在 Windows 上熟悉 Vim 的完整环境对你也应该是件好事——尤其如果你是做服务器或嵌入式开发的话。</p>
<p>下一讲，我们就会进一步学习一下 Vim 的基本概念和配置。</p>
<h2>课后练习</h2>
<p>如果你之前不常使用 Vim ，请务必花点时间看一下 Vim 教程。在下一讲开始时，我将会假设你已经掌握了 Vim 教程里的基本用法。</p>
<p>当然，如果有任何问题的话，可以在讨论区留言和我进行交流。</p>
<p>我是吴咏炜，我们下一讲再见。</p>
</div>
                        </div>
                        <div>
                            <div style="float: left">
                                <a href="00%20%E5%BC%80%E7%AF%87%E8%AF%8D%20%E6%88%91%E4%BB%AC%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%AD%A6%20Vim%EF%BC%9F.md.html">上一页</a>
                            </div>
                            <div style="float: right">
                                <a href="02%20%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%92%8C%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4%EF%BC%9A%E5%BA%94%E5%AF%B9%E7%AE%80%E5%8D%95%E7%9A%84%E7%BC%96%E8%BE%91%E4%BB%BB%E5%8A%A1.md.html">下一页</a>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="copyright"><p>© 2019 - 2023 <a href="../../cdn-cgi/l/email-protection.html#94f8f8f8ada0a5a5a4a3d4f3f9f5fdf8baf7fbf9" target="_blank">Liangliang Lee</a>. Powered by <a href="https://vertx.io/" target="_blank">Vert.x</a> and <a href="https://github.com/kaiiiz/hexo-theme-book" target="_blank">hexo-theme-book</a>.</p></div>
        </div>

        <a class="off-canvas-overlay" onclick="hide_canvas()"></a>
    </div>
<script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script defer src="https://static.cloudflareinsights.com/beacon.min.js/vb26e4fa9e5134444860be286fd8771851679335129114" integrity="sha512-M3hN/6cva/SjwrOtyXeUa5IuCT0sedyfT+jK/OV+s+D0RnzrTfwjwJHhd+wYfMm9HJSrZ1IKksOdddLuN6KOzw==" data-cf-beacon='{"rayId":"7af06b80b94a24f3","version":"2023.3.0","r":1,"token":"1f5d475227ce4f0089a7cff1ab17c0f5","si":100}' crossorigin="anonymous"></script>
</body>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NPSEEVD756"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'G-NPSEEVD756');
    var path = window.location.pathname
    var cookie = getCookie("lastPath");
    console.log(path)
    if (path.replace("/", "") === "") {
        if (cookie.replace("/", "") !== "") {
            console.log(cookie)
            document.getElementById("tip").innerHTML = "<a href='" + cookie + "'>跳转到上次进度</a>"
        }
    } else {
        setCookie("lastPath", path)
    }

    function setCookie(cname, cvalue) {
        var d = new Date();
        d.setTime(d.getTime() + (180 * 24 * 60 * 60 * 1000));
        var expires = "expires=" + d.toGMTString();
        document.cookie = cname + "=" + cvalue + "; " + expires + ";path = /";
    }

    function getCookie(cname) {
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i].trim();
            if (c.indexOf(name) === 0) return c.substring(name.length, c.length);
        }
        return "";
    }

    hljs.initHighlightingOnLoad()

</script>

</html>
